# http 1 / 1.1 / 2 / 3 版本的区别

## 1. http 1.0

### 1.1 特点

- 每次请求都需要建立新的TCP连接，请求完成后断开连接
- 同一时间只能处理一个请求，不能并行处理多个请求

### 1.2 缺点

- 性能低下，每次请求都需要建立新的连接，请求完成后断开连接，增加了延迟
- 同一时间只能处理一个请求，不能并行处理多个请求，降低了并发性能


## 2. http 1.1

### 2.1 特点
- 支持**长连接**，即TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟
- 支持请求流水线，可以同时发送**多个请求**。但服务器必须按请求顺序返回响应。
- 支持在内容长度未知时**分块传输**数据，提高动态内容加载效率。
- 引入了更多的**缓存控制**策略，如If-Unmodified-Since, If-Match, If-None-Match等缓存头来控制缓存策略。
- 引入**host**，实现了在一台WEB服务器上可以在同一个IP地址和端口号上使用不同的主机名来创建多个虚拟WEB站点

### 2.2 缺点
- 仍然存在队头阻塞问题，即一个请求被阻塞，其他请求也会被阻塞
- 请求头过大，每次请求都需要发送请求头，增加了传输负担

## 3. http 2

### 3.1 特点

- **二进制分帧**：HTTP/2 采用二进制格式传输数据，而非 HTTP 1.x的文本格式，解析起来更高效。每个数据流都以消息的形式发送，而消息又由一个或多个帧组成。多个帧之间可以乱序发送，根据帧首部的流标识可以重新组装，这也是多路复用同时发送数据的实现条件

- **多路复用**：HTTP/2 允许在一个 TCP 连接上并行发送多个请求和响应，避免了队头阻塞问题。
  
- **首部压缩** HTTP/2在客户端和服务器端使用“首部表”来维护。对于相同的数据，不再重复发送，只发送差异的数据。

- **服务器推送**：服务器可以对客户端的请求进行预测，主动向客户端推送资源，减少客户端的请求次数，提高加载速度。比如发html文件的时候，同时把可能需要的js，css都发过去。

### 4. http 3
### 4.1 特点

- **基于UDP协议**：HTTP/3 使用基于 UDP 的 QUIC 协议作为传输层协议，而不是传统的 TCP 协议。QUIC 协议在 UDP 的基础上实现了可靠传输、多路复用、快速握手等功能，从而提高了传输效率。

- **解决队头阻塞** QUIC 的独立流传输机制彻底解决了 TCP 的队头阻塞问题

- **快速握手**：HTTP/3 的 QUIC 协议支持 0-RTT 和 1-RTT。 可以实现快速握手，减少连接建立时间。
  - 0-RTT：如果之前与服务器有过连接，客户端可直接发送数据。
  - 1-RTT：连接建立(TCP)和加密协商(TSL)同步完成.

- **安全性更高**：HTTP/3 默认使用 TLS1.3 加密，保证了数据传输的安全性。


- **连接ID**：添加了连接id标识，即使网络环境发生变化（如wifi切换到移动流量），连接也不会中断，提高了用户体验。


## 总结

| **特性**        | **HTTP 1.0**         | **HTTP 1.1**                | **HTTP 2.0**              | **HTTP 3.0**                  |
|------------------|----------------------|-----------------------------|---------------------------|-------------------------------|
| **连接复用**     | 不支持               | 支持（持久连接）            | 支持（多路复用）          | 支持（独立流）               |
| **传输格式**     | 文本                 | 文本                        | 二进制                    | 二进制                        |
| **队头阻塞**     | 存在                 | 存在（管线化部分缓解）      | 解决（多路复用）          | 完全解决                     |
| **加密支持**     | 可选                 | 可选                        | 可选                     | 默认启用（基于 TLS 1.3）      |
| **服务器推送**   | 不支持               | 不支持                      | 支持                     | 支持                          |
| **传输协议**     | TCP                  | TCP                         | TCP                      | QUIC（基于 UDP）              |
